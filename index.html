<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="index.css">

    <title>Attach Events Demo</title>
</head>
<body>

<h1>Attach Events Demo</h1>

<!-- Menu One - test behavior -->
<div class="menu" id="test">

    <div class="title" title="Collapse/Expand the menu">
        <span class="status"> ⊕ </span>
        <span class="label">Test Menu</span>
    </div>

    <ul>

        <li>
            Part One
        </li>

        <li>
            Part Two
        </li>

        <li>
            Part Three
        </li>

    </ul>
</div>

<!-- Menu Two - negative testing -->
<div class="menu" id="negative-test">

    <div class="title" title="Collapse/Expand the menu">
        <span class="status"> ⊕ </span>
        <span class="label">Menu Two - Negative Testing</span>
    </div>

    <ul>

        <li>
            Part One
        </li>

        <li>
            Part Two
        </li>

        <li>
            Part Three
        </li>

    </ul>
</div>

</body>
<script src="attachEvents.js"></script>
<script>
"use strict";

// shortcut functions
var qs   = (selector) => document.querySelector(selector),
    qsa  = (selector) => document.querySelectorAll (selector),
    // to_a() works for NodeList (returned by querySelectorAll), DOMTokenList (returned by classList), etc.
    to_a = (list) => Array.prototype.slice.call(list);
window.qs = qs; window.qsa = qsa; window.to_a = to_a;

attachEvents({

    // Clicking a menu title toggles its menu's visibility.
    '.menu#test': {
        '.title': {
            'click': function() { 
                var [list, statusicon] = [qs(".menu ul"), qs(".menu .status")];
                var hidden = ( list.style.display === "none" );
                list.style.display = ( hidden ? "block" : "none" );
                statusicon.innerHTML = ( hidden ? " ⊕ " : " ⊖ " );
            }
        }
    }

});

</script>
</html>
